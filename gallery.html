<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="js/jquery-1.11.2.min.js"></script>
<script src="jquery-ui-1.11.3/jquery-ui.min.js"></script>
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/gallery.css">
<!--link href='http://fonts.googleapis.com/css?family=Forum&subset=cyrillic-ext,latin' rel='stylesheet' type='text/css'-->
<link rel="stylesheet" href="css/forum.fonts.css">
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="js/bootstrap-paginator.min.js"></script>
<script src="js/jquery.bpopup.js"></script>
<script src="js/main.js"></script>
<script src="js/db.js"></script>
<script>
	var categories = [];
	var allPages = 1;
	var view = "col-sm-3";
	
	function getUrlParam(param) {
		if (window.document.URL.indexOf("?") > 0) {
		  var end = window.document.URL.indexOf("#");
		  if (end === -1) {
			end = window.document.URL.length;
		  }
		  var params = window.document.URL.substring(window.document.URL.indexOf("?") + 1, end).split("&");
		  for (var i = 0; i < params.length; i++) {
			if (params[i].indexOf("=") > 0) {
			  var spl = params[i].split("=");
			  if (spl[0] === param) {
				return spl[1];
			  }
			}
		  }
		}
		return "";
	}	
	
	function doLeftRightPopup() {
		$("#leftOrTop").removeClass("topPart").addClass("leftPart");
		$("#rightOrBottom").removeClass("bottomPart").addClass("rightPart");
		$("#mainImg").css({'max-width': '500px', 'max-height': '500px' });
		$("#secondImg").removeClass("thumbnailBracelets").addClass("thumbnail");
		$("#thirdImg").removeClass("thumbnailBracelets").addClass("thumbnail");	
		$("#fourthImg").removeClass("thumbnailBracelets").addClass("thumbnail");
	}
	
	function doTopBottomPopup() {	
		$("#leftOrTop").removeClass("leftPart").addClass("topPart");
		$("#rightOrBottom").removeClass("rightPart").addClass("bottomPart");
		$("#mainImg").css({'max-width': '1000px', 'max-height': '200px' });
		$("#secondImg").removeClass("thumbnail").addClass("thumbnailBracelets");
		$("#thirdImg").removeClass("thumbnail").addClass("thumbnailBracelets");
		$("#fourthImg").removeClass("thumbnail").addClass("thumbnailBracelets");
	}
	
	function loadGallery() {
		var category = getUrlParam("category");
		if(!category) category = "rings";
		switch(category) {
			case "rings":
				this.categories = [2];
				$(".categoryTitle").text("Пръстени");
				$("#radio1div").show();				
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Дамски");
				$("#radio1").attr("categories", "2");
				$("#radio2div").show();
				$("#radio2div label").text("Мъжки");
				$("#radio2").attr("categories", "3");
				doLeftRightPopup();				
				break;
			case "diamonds":
				this.categories = [14, 18, 19, 21, 26, 27];
				$(".categoryTitle").text("Диаманти");
				break;
			case "bracelets":
				this.categories = [4, 25, 28];
				$(".categoryTitle").text("Гривни");
				$("#radio1div").show();
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Дамски");
				$("#radio1").attr("categories", "4,25,28");
				$("#radio2div").show();
				$("#radio2div label").text("Мъжки");
				$("#radio2").attr("categories", "5");
				$("#radio3div").show();
				$("#radio3div label").text("Детски");
				$("#radio3").attr("categories", "22");
				$("#radio4div").show();
				$("#radio4div label").text("С червен конец");
				$("#radio4").attr("categories", "22");
				doTopBottomPopup();
				break;
			case "wedRings":
				this.categories = [9];
				$(".categoryTitle").text("Халки");
				break;
			case "earrings":
				this.categories = [16];
				$(".categoryTitle").text("Обеци");
				break;
			case "necklaces":
				this.categories = [6];
				$(".categoryTitle").text("Колиета");
				break;
			case "chains":
				this.categories = [8];
				$(".categoryTitle").text("Синджири");
				doTopBottomPopup();
				$('.navbar-right').css('display', "none");
				$('.col-sm-3').removeClass('col-sm-3').addClass('col-sm-12');
				view = "col-sm-12";
				break;
			case "pendants":
				this.categories = [31];
				$(".categoryTitle").text("Висулки");
				$("#radio1div").show()
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Кръстчета");
				$("#radio1").attr("categories", "31");
				$("#radio2div").show();
				$("#radio2div label").text("Богородици");
				$("#radio2").attr("categories", "32");
				$("#radio3div").show();
				$("#radio3div label").text("Зодии");
				$("#radio3").attr("categories", "33");
				$("#radio4div").show();
				$("#radio4div label").text("Букви");
				$("#radio4").attr("categories", "34");
				doLeftRightPopup();
				//$("#radio5div").show();
				//$("#radio5div label").text("Други");
				//$("#radio5").attr("categories", "2");
				break;
			case "accessories":
				this.categories = [30];
				$(".categoryTitle").text("Аксесоари");
				$("#radio1div").show();				
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Златни аксесоари");
				$("#radio1").attr("categories", "30");
				$("#radio2div").show();
				$("#radio2div label").text("Златни часовници");
				$("#radio2").attr("categories", "30");
				$("#radio3div").show();
				$("#radio3div label").text("Стомана и диаманти");
				$("#radio3").attr("categories", "30");
				break;
			case "leather_and_silicone":
				this.categories = [11, 12];
				$(".categoryTitle").text("Кожа и силикон");				
				break;					
			default: 
				this.categories = [2];
				window.location.replace("gallery.html?category=rings");
		}
		allPages = Math.ceil(getCount(categories) / 20);
	}

	function createPager() {
		var options = {
            currentPage: 1,
            totalPages: allPages ? allPages : 1,
			bootstrapMajorVersion: 3,
			onPageChanged: function(e,oldPage,newPage){
				$('html,body').animate({scrollTop:$("#galleryGrid").offset().top - $("#galleryMenu").height()}, 1000);
				updateGallery(newPage);
			}
        }
        $('#galleryPager').bootstrapPaginator(options);
	}
	
	$(function() {
		loadGallery();
		createPager();
		updateGallery(1);
		
		$(window).load(function(){
			$('.icon-small').css({'color': '#333', 'background-color': 'transparent'});
			
			$('.icon-large').bind('click', function(e){
				e.preventDefault();
				$('.icon-small').css({'color': '', 'background-color': ''});
				$('.col-sm-3').removeClass('col-sm-3').addClass('col-sm-6');
				view = "col-sm-6";
			});
			$('.icon-small').bind('click', function(e){
				e.preventDefault();
				$(this).css({'color': '#333', 'background-color': 'transparent'});
				$('.icon-lagre').css({'color': '', 'background-color': ''});
				$('.col-sm-6').removeClass('col-sm-6').addClass('col-sm-3');
				view = "col-sm-3";				
			});
			
			$("#filter input:radio").bind('click', function(e){
				categories = $(this).attr("categories").split(',');
				allPages = Math.ceil(getCount(categories) / 20);
				createPager();
				updateGallery(1);
			});
			
			$("#rightOrBottom img").bind("click", function() {
				var src1 = $("#mainImg").attr("src");
				var src2 = $(this).attr("src");
				$("#mainImg").attr("src", src2);
				$(this).attr("src", src1);
			});
		});
		
		$(window).scroll(function() {
			if($("#menu").css("position") === "fixed") {
				$("#galleryMenu").addClass("gallery-menu-top");
			} else if($("#galleryMenu").hasClass("gallery-menu-top")) {
				$("#galleryMenu").removeClass("gallery-menu-top");
			}
		});
		$(window).resize(function() {
			if($("#menu").css("position") === "fixed") {
				$("#galleryMenu").addClass("gallery-menu-top");
			} else if($("#galleryMenu").hasClass("gallery-menu-top")) {
				$("#galleryMenu").removeClass("gallery-menu-top");
			}
		});
	});
	
	function updateGallery(page) {
		$(".row").remove();
		var pager = $("#galleryPager");
		var str = "";
		for(i = 0; i < categories.length; i++) {
			str += categories[i];
			if(i < categories.length - 1) {
				str += ",";
			}
		}
		getItems(str, 20, (page-1) * 20, pager, view);
	}
	
	function searchItem0() {
		var num = $("#searchBox").val();
		if(num == "") {
			return;
		}
		$(".row").remove();
		var pager = $("#galleryPager");
		allPages = 1;
		createPager();
		searchItem(num, pager, view);
	}
</script>
</head>
<body>
	<div class="background1"></div>
	<div class="background2"></div>
	<div id="mainBanner" class="container" style="position: relative;">
		<img class="center-block img-responsive" src="logo_baner.png"
			id="topImage" />
		<nav class="navbar navbar-default menu-default" id="menu">
			<img class="img-responsive" src="logo.png" id="logo" />
			<div class="container-fluid mobileMenu">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed"
						data-toggle="collapse" data-target="#navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="navbar-collapse-1">
					<ul class="nav nav-pills nav-justified">
						<li><a href="markazit.html"><h4>Начало</h4></a></li>
						<li class="active"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown"><h4>
									Колекция <span class="glyphicon glyphicon-chevron-down"
										style="margin-left: 10px; vertical-align: text-bottom;"></span>
								</h4></a>
							<ul class="dropdown-menu" role="menu" aria-labelledby="menu1"
								style="width: 100%;">
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=rings">Пръстени</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=diamonds">Диаманти</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=bracelets">Гривни</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=wedRings">Халки</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=earrings">Обеци</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=necklaces">Колиета</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=chains">Синджири</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=pendants">Висулки</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=accessories">Аксесоари</a></li>
								<li role="presentation"><a role="menuitem" tabindex="-1"
									href="gallery.html?category=leather_and_silicone">Кожа и
										силикон</a></li>
							</ul></li>
						<li><a href="buying.html"><h4>Изкупуване</h4></a></li>
						<li><a href="orders.html"><h4>Поръчки</h4></a></li>
						<li><a href="advices.html"><h4>Съвети</h4></a></li>
						<li><a href="about.html"><h4>За нас</h4></a></li>
					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container-fluid -->
		</nav>
	</div>
	<div class="container">
		<nav class="navbar navbar-default" id="galleryMenu">
			<div class="container-fluid">
				<!-- Collect the nav links, forms, and other content for toggling -->
				<ul class="nav navbar-nav navbar-left" style="font-size: 1.4em;">
					<!-- <li class="dropdown">
			  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Категория<span class="caret"></span></a>
			  <ul class="dropdown-menu" role="menu">
				<li><a href="#" style="font-size: 1.4em;">Дамски</a></li>
				<li><a href="#" style="font-size: 1.4em;">Мъжки</a></li>
			  </ul>
			</li> -->
					<li class="sort dropdown"><a href="#" class="dropdown-toggle"
						data-toggle="dropdown" role="button" aria-expanded="false">Сортирай по цена<span
							class="caret"></span></a>
						<ul class="sort dropdown-menu" role="menu">
							<li><a href="#" style="font-size: 1.4em; width: 210px;">от най-ниска <span class="glyphicon glyphicon-menu-up" style="float: right;"></span></a></li>
							<li><a href="#" style="font-size: 1.4em; width: 210px;">от най-висока <span class="glyphicon glyphicon-menu-down" style="float: right;"></span></a></li>
						</ul>
					</li>
					<!-- <li class="searchSection">
						<label for="searchBox" style="display: inline; border: 0; font-size: 0.6em;">Кат. №</label>
						<input class="form-control" id="searchBox" type="text" style="display: inline; width: initial;">
						<input class="btn btn-default" type="submit" value="Търси" onclick="searchItem0();">
					</li> -->
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#" class="icon-small"><span
							class="glyphicon glyphicon-th"></span></a></li>
					<li><a href="#" class="icon-large"><span
							class="glyphicon glyphicon-th-large "></span></a></li>
				</ul>
			</div>
			<!-- /.container-fluid -->
		</nav>
	</div>

	<div style="font-family: 'Forum', cursive;" id="popup">
		<span class="b-close"><!--span>X</span--><!--img src="close_icon.png" style="max-width:inherit; max-height: inherit;"/--></span>
		<div id="leftOrTop" class="leftPart">
			<img id="mainImg" class="img-responsive" src="">
		</div>
		<div id="rightOrBottom" class="rightPart">
			<span style="font-size: 1.5em;">Кат. №<span id="catalogNum"></span></span></br>
			<span class="" style="width: 100%; text-align: center; font-size: 1.9em;">Цена: <span id="price" style="font-size: 1.1em"></span>
			<span style="font-size: 1.1em"> лв.</span>
			</span>
			<div class="imageContainer"><hr></hr>
			<img id="secondImg" class="img-responsive thumbnail" src=""/>
			<img id="thirdImg" class="img-responsive thumbnail" src=""/>
			<img id="fourthImg" class="img-responsive thumbnail" src=""/><hr></hr></div>
			<div>
			<span class="" style="font-size: 1.5em;" >Тегло: <span id="weight"></span></span></br><span class="" style="font-size: 1.5em;" >Параметри: <span id="params"></span></span>
			</div>
		</div>
	</div>

	<div id="galleryGrid" class="container gallery last">
		<div id="filter">
			<div style="bottom: 0.5em; text-align: right;"><div class="searchSection">
													<label for="searchBox" style="display: inline; border: 0; font-size: 0.8em;">Кат. №</label>
													<input class="form-control" id="searchBox" type="text" style="display: inline; width: initial;">
													<input class="btn btn-default" type="submit" value="Търси" onclick="searchItem0();">
												</div></div>
			<span class="categoryTitle"></span> 			
			<div class="radioBtnWrapper">
			<div class="radioBtnContainer">
				<div id="radio1div" class="radioDiv" style="display: none;">
					<input type="radio" name="radio" id="radio1" class="radio" />
					<label for="radio1"></label>
				</div>
				<div id="radio2div" class="radioDiv" style="display: none;">
					<input type="radio" name="radio" id="radio2" class="radio" />
					<label for="radio2"></label>
				</div>
			</div>
			<div class="radioBtnContainer">
				<div id="radio3div" class="radioDiv" style="display: none; /*margin-bottom: 2.4em*/">
					<input type="radio" name="radio" id="radio3" class="radio" />
					<label for="radio3"></label>
				</div>
			
				<!-- </br> -->
				<div id="radio4div" class="radioDiv" style="display: none;">
					<input type="radio" name="radio" id="radio4" class="radio" />
					<label for="radio4"></label>
				</div>
			</div>
			<div class="radioBtnContainer">
				<div id="radio5div" class="radioDiv" style="display: none;">
					<input type="radio" name="radio" id="radio5" class="radio" />
					<label for="radio5"></label>
				</div>
				<div id="radio6div" class="radioDiv" style="display: none;">
					<input type="radio" name="radio" id="radio6" class="radio" />
					<label for="radio6"></label>
				</div>
			</div>
			</div>
		</div><br/><br/>
		<ul id="galleryPager" class="pagination">
		</ul>
	</div>
	<div id="footerContainer" class="container">
		<footer class="footer">
			<nav class="navbar navbar-default">
				<div id="navbar" class="container-fluid">
					<div class="footerMenu" style="">
						<ul class="nav bottom">
							<!-- <li><a href="about.html"><span>За нас</span></a></li> -->
							<li><a href="advices.html"><span>Защо да пазарувате тук?</span></a></li>
							<li><a href="advices.html"><span>Често задавани въпроси</span></a></li>
							<li><a href="about.html"><span>Контакти</span></a></li>
						</ul>
						<div class="socials">
							<a href="#"><div class="mail"></div></a> <a href="about.html#phones"><div
									class="phone"></div></a> <a href="#"><div class="facebook"></div></a>
							<a href="#"><div class="googlePlus"></div></a>
						</div>
					</div>
				</div>
			</nav>
		</footer>
	</div>
</body>
</html>