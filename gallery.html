<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="js/jquery-1.11.2.min.js"></script>
<script src="jquery-ui-1.11.3/jquery-ui.min.js"></script>
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/gallery.css">
<!--link href='http://fonts.googleapis.com/css?family=Forum&subset=cyrillic-ext,latin' rel='stylesheet' type='text/css'-->
<link rel="stylesheet" href="css/forum.fonts.css">
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="js/jquery.bpopup.js"></script>
<script src="js/main.js"></script>
<script src="js/db.js"></script>
<script>
	var category = 1;
	var galleryPage = 1;
	var allPages = Math.ceil(getCount(category) / 20);
	var view = "col-sm-3";
	
	function getUrlParam(param) {
		if (window.document.URL.indexOf("?") > 0) {
		  var end = window.document.URL.indexOf("#");
		  if (end === -1) {
			end = window.document.URL.length;
		  }
		  var params = window.document.URL.substring(window.document.URL.indexOf("?") + 1, end).split("&");
		  for (var i = 0; i < params.length; i++) {
			if (params[i].indexOf("=") > 0) {
			  var spl = params[i].split("=");
			  if (spl[0] === param) {
				return spl[1];
			  }
			}
		  }
		}
		return "";
	}
	
	function loadGallery() {
		var category = getUrlParam("category");
		if(!category) category = "rings";
		switch(category) {
			case "rings":
				this.category = 1;
				$("#radio1div").show();
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Мъжки");
				$("#radio2div").show();
				$("#radio2div label").text("Женски");
				break;
			case "diamonds":
				this.category = 1;
				$("#radio1div").show();
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Всички");
				$("#radio2div").show();
				$("#radio2div label").text("Мъжки");
				$("#radio3div").show();
				$("#radio3div label").text("Женски");
				break;
			case "bracelets":
				this.category = 1;
				$("#radio1div").show();
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Всички");
				$("#radio2div").show();
				$("#radio2div label").text("Мъжки");
				$("#radio3div").show();
				$("#radio3div label").text("Женски");
				break;
			case "wedRings":
				this.category = 1;
				$("#radio1div").show();
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Всички");
				$("#radio2div").show();
				$("#radio2div label").text("Мъжки");
				$("#radio3div").show();
				$("#radio3div label").text("Женски");
				break;
			case "pendants":
				this.category = 1;
				$("#radio1div").show();
				$("#radio1").attr("checked", true);
				$("#radio1div label").text("Всички");
				$("#radio2div").show();
				$("#radio2div label").text("Кръстчета");
				$("#radio3div").show();
				$("#radio3div label").text("Богородици");
				$("#radio4div").show();
				$("#radio4div label").text("Зодии");
				$("#radio5div").show();
				$("#radio5div label").text("Букви");
				$("#radio6div").show();
				$("#radio6div label").text("Детски");
				break;
			default: 
				this.category = 1;
				window.location.replace("gallery.html?category=rings");
		}
	}

	$(function() {
		loadGallery();
		$('.pager a[href*=#]').on('click', function(event){     
			event.preventDefault();
			$('html,body').animate({scrollTop:$(this.hash).offset().top - $("#galleryMenu").height()}, 1000);
		});
		$(".previous").click(function() {
			if(galleryPage > 1) {
				galleryPage--;
				updateGallery(galleryPage);
			}
		});
		$(".next").click(function() {
			if(galleryPage < allPages) {
				galleryPage++;
				updateGallery(galleryPage);
			}
		});
		
		updateGallery(galleryPage);
		
		$(window).load(function(){
			$('.icon-small').css({'color': '#333', 'background-color': 'transparent'});
			
			$('.icon-large').bind('click', function(e){
				e.preventDefault();
				$('.icon-small').css({'color': '', 'background-color': ''});
				$('.col-sm-3').removeClass('col-sm-3').addClass('col-sm-6');
				view = "col-sm-6";
			});
			$('.icon-small').bind('click', function(e){
				e.preventDefault();
				$(this).css({'color': '#333', 'background-color': 'transparent'});
				$('.icon-lagre').css({'color': '', 'background-color': ''});
				$('.col-sm-6').removeClass('col-sm-6').addClass('col-sm-3');
				view = "col-sm-3";				
			});
			
			$("#filter input:radio").bind('click', function(e){
				$("#filter input:radio[checked=checked]").each(function() {
					$(this).attr("checked", false);
				});
				$(this).attr("checked", true);
				//category = 1;
				//allPages = Math.ceil(getCount(category) / 20);
				//galleryPage = 1;
				//updateGallery(galleryPage);
			});
		});
		
		$(window).scroll(function() {
			if($("#menu").css("position") === "fixed") {
				$("#galleryMenu").addClass("gallery-menu-top");
			} else if($("#galleryMenu").hasClass("gallery-menu-top")) {
				$("#galleryMenu").removeClass("gallery-menu-top");
			}
		});
		$(window).resize(function() {
			if($("#menu").css("position") === "fixed") {
				$("#galleryMenu").addClass("gallery-menu-top");
			} else if($("#galleryMenu").hasClass("gallery-menu-top")) {
				$("#galleryMenu").removeClass("gallery-menu-top");
			}
		});
	});
	
	function updateGallery(page) {
		$(".row").remove();
		var pager = $("#galleryPager");
		getItems(category, 20, (page-1) * 20, pager, view);
		$("#pages").text(galleryPage + "/" + allPages);
	}
</script>
</head>
<body>
<div class="background1"></div>
<div class="background2"></div>
<div id="mainBanner" class="container" style="position:relative;">
	<img class="center-block img-responsive" src="logo_baner.png" id="topImage" />
	<nav class="navbar navbar-default menu-default" id="menu">
	<img class="img-responsive" src="logo.png" id="logo" />
	  <div class="container-fluid mobileMenu">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
		  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		  </button>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
		  <ul class="nav nav-pills nav-justified">
			<li><a href="markazit.html"><h4>Начало</h4></a></li>
			<li class="active"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><h4>Колекция <span class="glyphicon glyphicon-chevron-down" style="margin-left: 10px; vertical-align: text-bottom;"></span></h4></a>
				<ul class="dropdown-menu" role="menu" aria-labelledby="menu1" style="width:100%;">
					<li role="presentation"><a role="menuitem" tabindex="-1" href="gallery.html?category=rings">Пръстени</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="gallery.html?category=diamonds">Диаманти</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="gallery.html?category=bracelets">Гривни</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="gallery.html?category=wedRings">Халки</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="#">ОБЕЦИ</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="#">КОЛИЕТА</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="gallery.html?category=pendants">Висулки</a></li>
				</ul>
			</li>
			<li><a href="buying.html"><h4>Изкупуване</h4></a></li>
			<li><a href="#"><h4>Поръчки</h4></a></li>
			<li><a href="#"><h4>Съвети</h4></a></li>
			<li><a href="#"><h4>За нас</h4></a></li>
		  </ul>
		</div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>
</div>
<div class="container">
	<nav class="navbar navbar-default" id="galleryMenu">
	  <div class="container-fluid">
		<!-- Collect the nav links, forms, and other content for toggling -->
		  <ul class="nav navbar-nav navbar-left" style="font-size: 1.4em;">
			<!-- <li class="dropdown">
			  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Категория<span class="caret"></span></a>
			  <ul class="dropdown-menu" role="menu">
				<li><a href="#" style="font-size: 1.4em;">Дамски</a></li>
				<li><a href="#" style="font-size: 1.4em;">Мъжки</a></li>
			  </ul>
			</li> -->
			<li class="dropdown">
			  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Сортирай<span class="caret"></span></a>
			  <ul class="dropdown-menu" role="menu">
				<li><a href="#" style="font-size: 1.4em;">цена <span class="glyphicon glyphicon-menu-up"></a></li>
				<li><a href="#" style="font-size: 1.4em;">цена <span class="glyphicon glyphicon-menu-down"></a></li>
			  </ul>
			</li>
		  </ul>
		  <ul class="nav navbar-nav navbar-right">
			<li><a href="#" class="icon-small"><span class="glyphicon glyphicon-th"></a></li>
			<li><a href="#" class="icon-large"><span class="glyphicon glyphicon-th-large "></a></li>
		  </ul>
	  </div><!-- /.container-fluid -->
	</nav>
</div>

<div style="font-family: 'Forum', cursive;" id="popup">
        <span class="button b-close"><span>X</span></span>
		<div style="float: left; width: 50%;">
			<img id="mainImg" class="img-responsive" src="" >
		</div>
		<div style="float: right; width: 50%;">
			<span style="font-size: 1.5em;">Кат. №<span id="catalogNum"></span></span></br>
			<span class="" style="width: 100%; text-align: center; font-size: 1.9em; ">Цена: <span id="price" style="font-size: 1.1em"></span><span style="font-size: 1.1em"> лв.</span></span>
			<hr></hr>
			<img id="secondImg" class="img-responsive" src="" style="width: 31%; display: inline-block;">
			<img id="thirdImg" class="img-responsive" src="" style="width: 31%; display: inline-block;">
			<img id="fourthImg" class="img-responsive" src="" style="width: 31%; display: inline-block;">
			<hr></hr>		
			<span class="" style="">Тегло: </span><span id="weight"></span></br>
			<span class="" style="">Параметри: </span><span id="params"></span>		
		</div>
</div>
	
<div id="galleryGrid" class="container gallery last">
	<div id="filter">
		<div id="radio1div" style="display:none;">
			<input type="radio" name="radio" id="radio1" class="radio"/>
			<label for="radio1"></label>
		</div>
		<div id="radio2div" style="display:none;">
			<input type="radio" name="radio" id="radio2" class="radio"/>
			<label for="radio2"></label>
		</div>
		<div id="radio3div" style="display:none;">	
			<input type="radio" name="radio" id="radio3" class="radio"/>
			<label for="radio3"></label>
		</div></br>
		<div id="radio4div" style="display:none;">	
			<input type="radio" name="radio" id="radio4" class="radio"/>
			<label for="radio4"></label>
		</div>
		<div id="radio5div" style="display:none;">	
			<input type="radio" name="radio" id="radio5" class="radio"/>
			<label for="radio5"></label>
		</div>
		<div id="radio6div" style="display:none;">	
			<input type="radio" name="radio" id="radio6" class="radio"/>
			<label for="radio6"></label>
		</div>
	</div>
	
<!-- <ul id="types">
    <li class="active_type"><a href="#">Бяло</a></li><li class=""><a href="#">Жълто</a></li><li class=""><a href="#">Комбинирано</a></li>
</ul> -->
  <ul id="galleryPager" class="pager">
    <li class="previous"><a href="#galleryGrid">Previous</a></li>
    <li id="pages"></li>
    <li class="next"><a href="#galleryGrid">Next</a></li>
  </ul>
</div>
<div id="footerContainer" class="container">
  <footer class="footer">
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
		<div>
		  <ul class="nav nav-pills nav-justified">
			<li><a href="#"><h5>За нас</h5></a></li>
			<li><a href="#"><h5>Защо да пазарувате тук?</h5></a></li>
			<li><a href="#"><h5>Често задавани въпроси</h5></a></li>
			<li><a href="#"><h5>Контакти</h5></a></li>
		  </ul>
		</div>
	  </div>
	</nav>
  </footer>
</div>
</body>
</html>